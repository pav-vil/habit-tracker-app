{% extends "base.html" %}

{% block title %}Bitcoin Payment Pending - HabitFlow{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <!-- Pending Card -->
            <div class="card text-center" style="border-radius: 20px; box-shadow: 0 10px 40px rgba(245, 158, 11, 0.2);">
                <div class="card-body p-5">
                    <!-- Pending Icon -->
                    <div class="mb-4">
                        <div style="font-size: 80px; color: #f59e0b;">‚è≥</div>
                    </div>

                    <!-- Pending Message -->
                    <h1 class="mb-3" style="color: #f59e0b; font-weight: 700;">Bitcoin Payment Pending</h1>
                    <p class="lead mb-4" style="color: #666;">
                        Your Bitcoin payment has been submitted and is awaiting blockchain confirmation.
                    </p>

                    <!-- Payment Details -->
                    <div class="alert" style="background: rgba(245, 158, 11, 0.1); border: 1px solid #f59e0b; border-radius: 12px;">
                        <div class="row">
                            <div class="col-6 text-start">
                                <strong style="color: #f59e0b;">Amount:</strong>
                            </div>
                            <div class="col-6 text-end">
                                <strong>${{ '%.2f'|format(amount) }} {{ currency }}</strong>
                            </div>
                        </div>
                        <hr style="border-color: #f59e0b; opacity: 0.3;">
                        <div class="row">
                            <div class="col-6 text-start">
                                <strong style="color: #f59e0b;">Plan:</strong>
                            </div>
                            <div class="col-6 text-end">
                                <strong>{{ tier.capitalize() }}</strong>
                            </div>
                        </div>
                        <hr style="border-color: #f59e0b; opacity: 0.3;">
                        <div class="row">
                            <div class="col-6 text-start">
                                <strong style="color: #f59e0b;">Payment Method:</strong>
                            </div>
                            <div class="col-6 text-end">
                                <strong>Bitcoin/Cryptocurrency</strong>
                            </div>
                        </div>
                    </div>

                    <!-- What's Next? -->
                    <div class="mt-4 p-4" style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 12px;">
                        <h5 style="color: #f59e0b; font-weight: 600; margin-bottom: 20px;">What happens next?</h5>
                        <div class="text-start">
                            <div class="mb-3">
                                <strong style="color: #f59e0b;">1. Blockchain Confirmation</strong>
                                <p class="mb-0 text-muted">Your payment is being confirmed on the Bitcoin network. This typically takes 10-30 minutes.</p>
                            </div>
                            <div class="mb-3">
                                <strong style="color: #f59e0b;">2. Automatic Activation</strong>
                                <p class="mb-0 text-muted">Once confirmed, your lifetime subscription will be automatically activated!</p>
                            </div>
                            <div class="mb-0">
                                <strong style="color: #f59e0b;">3. Email Confirmation</strong>
                                <p class="mb-0 text-muted">You'll receive an email when your account is upgraded to lifetime tier.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Important Notice -->
                    <div class="alert alert-info mt-4" style="border-radius: 12px;">
                        <strong>‚ö° Important:</strong> You can safely close this page. We'll send you an email once your payment is confirmed. You can continue using the free tier in the meantime.
                    </div>

                    <!-- Premium Benefits Preview -->
                    <div class="mt-4 p-4" style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 12px;">
                        <h5 style="color: #7c3aed; font-weight: 600; margin-bottom: 20px;">Your Lifetime Benefits (Coming Soon!):</h5>
                        <ul class="list-unstyled mb-0 text-start">
                            <li class="mb-2">‚úì <strong>Unlimited habits forever</strong> - Never worry about limits again!</li>
                            <li class="mb-2">‚úì <strong>Advanced statistics</strong> - Deep insights into your progress</li>
                            <li class="mb-2">‚úì <strong>Export data</strong> - Download PDF & CSV reports</li>
                            <li class="mb-2">‚úì <strong>Priority support</strong> - Get help faster</li>
                            <li class="mb-2">‚úì <strong>Dark mode</strong> - Easy on the eyes</li>
                            <li class="mb-2">‚úì <strong>Early access</strong> - New features first</li>
                            <li class="mb-0">‚úì <strong>One-time payment</strong> - No recurring fees, ever!</li>
                        </ul>
                    </div>

                    <!-- Action Buttons -->
                    <div class="mt-5">
                        <a href="{{ url_for('habits.dashboard') }}" class="btn btn-primary btn-lg mb-2" style="background: linear-gradient(135deg, #7c3aed 0%, #a78bfa 100%); border: none; border-radius: 50px; padding: 15px 40px; font-weight: 600; box-shadow: 0 5px 20px rgba(124, 58, 237, 0.3);">
                            Continue to Dashboard
                        </a>
                        <br>
                        <a href="{{ url_for('profile.subscription') }}" class="btn btn-outline-secondary mt-2" style="border-radius: 50px; padding: 10px 30px;">
                            Check Subscription Status
                        </a>
                    </div>

                    <!-- Support Info -->
                    <div class="mt-4">
                        <p class="text-muted small mb-0">
                            Need help? Contact us at <a href="mailto:support@habitflow.app">support@habitflow.app</a>
                            <br>
                            Payment confirmations typically arrive within 30 minutes.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Loading Animation (Optional) -->
            <script>
                // Add simple loading animation
                document.addEventListener('DOMContentLoaded', function() {
                    console.log('Bitcoin payment submitted - awaiting confirmation üîó');

                    // Optional: Add a subtle pulse animation to the pending icon
                    const icon = document.querySelector('.card-body > div > div');
                    setInterval(() => {
                        icon.style.transform = 'scale(1.1)';
                        setTimeout(() => {
                            icon.style.transform = 'scale(1)';
                        }, 500);
                    }, 2000);
                });
            </script>
        </div>
    </div>
</div>
{% endblock %}
