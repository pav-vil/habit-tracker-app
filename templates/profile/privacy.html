{% extends "base.html" %}

{% block title %}Privacy Policy - HabitFlow{% endblock %}

{% block content %}
<div class="container py-4">
    <!-- Page Header -->
    <div class="row mb-4">
        <div class="col-md-12">
            <h1 class="mb-2">üîí Privacy Policy</h1>
            <p class="text-muted">Last Updated: December 28, 2025</p>
        </div>
    </div>

    <!-- Privacy Policy Content -->
    <div class="row">
        <div class="col-lg-10 mx-auto">
            <div class="card">
                <div class="card-body p-4">

                    <h2 class="h4 mb-3">Introduction</h2>
                    <p>
                        HabitFlow ("we", "our", or "us") is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our habit tracking application.
                    </p>

                    <hr class="my-4">

                    <h2 class="h4 mb-3">1. Information We Collect</h2>

                    <h3 class="h5 mb-2">Personal Information</h3>
                    <p>When you register for an account, we collect:</p>
                    <ul>
                        <li>Email address</li>
                        <li>Password (encrypted and never stored in plain text)</li>
                        <li>Timezone preference</li>
                        <li>Display preferences (dark mode, etc.)</li>
                    </ul>

                    <h3 class="h5 mb-2 mt-3">Habit Data</h3>
                    <p>When you use HabitFlow, we collect:</p>
                    <ul>
                        <li>Habit names and descriptions</li>
                        <li>Completion logs and streaks</li>
                        <li>Statistics and analytics</li>
                    </ul>

                    <h3 class="h5 mb-2 mt-3">Payment Information</h3>
                    <p>When you purchase a subscription:</p>
                    <ul>
                        <li>Payment details are processed by Stripe, PayPal, or Coinbase Commerce</li>
                        <li>We do NOT store credit card numbers</li>
                        <li>We store transaction IDs and subscription status</li>
                    </ul>

                    <h3 class="h5 mb-2 mt-3">Automatically Collected Information</h3>
                    <ul>
                        <li>IP address (for security and fraud prevention)</li>
                        <li>Browser type and version</li>
                        <li>Device information</li>
                        <li>Usage statistics</li>
                    </ul>

                    <hr class="my-4">

                    <h2 class="h4 mb-3">2. How We Use Your Information</h2>
                    <p>We use your information to:</p>
                    <ul>
                        <li><strong>Provide the Service:</strong> Create and manage your account, track habits, generate statistics</li>
                        <li><strong>Process Payments:</strong> Handle subscriptions and billing</li>
                        <li><strong>Send Notifications:</strong> Habit reminders, payment confirmations (if you opt in)</li>
                        <li><strong>Improve the Service:</strong> Analyze usage patterns to enhance features</li>
                        <li><strong>Security:</strong> Detect and prevent fraud, abuse, and security incidents</li>
                        <li><strong>Legal Compliance:</strong> Comply with legal obligations</li>
                    </ul>

                    <hr class="my-4">

                    <h2 class="h4 mb-3">3. Data Sharing and Disclosure</h2>

                    <p>We do NOT sell your personal information. We may share data with:</p>

                    <h3 class="h5 mb-2">Service Providers</h3>
                    <ul>
                        <li><strong>Payment Processors:</strong> Stripe, PayPal, Coinbase Commerce (to process payments)</li>
                        <li><strong>Email Service:</strong> To send transactional emails and reminders</li>
                        <li><strong>Hosting Provider:</strong> Render.com (where our servers are located)</li>
                    </ul>

                    <h3 class="h5 mb-2 mt-3">Legal Requirements</h3>
                    <p>We may disclose your information if required by law or to:</p>
                    <ul>
                        <li>Comply with legal processes</li>
                        <li>Protect our rights and property</li>
                        <li>Prevent fraud or security issues</li>
                        <li>Protect the safety of users</li>
                    </ul>

                    <hr class="my-4">

                    <h2 class="h4 mb-3">4. Your Rights (GDPR Compliance)</h2>

                    <p>If you are in the European Union, you have the right to:</p>
                    <ul>
                        <li><strong>Access:</strong> Request a copy of your data
                            {% if current_user.is_authenticated %}
                                (<a href="{{ url_for('profile.export_data') }}">Download My Data</a>)
                            {% endif %}
                        </li>
                        <li><strong>Rectification:</strong> Correct inaccurate data (via Settings page)</li>
                        <li><strong>Erasure:</strong> Request account deletion (30-day grace period)</li>
                        <li><strong>Portability:</strong> Export your data in JSON format</li>
                        <li><strong>Object:</strong> Opt out of email notifications</li>
                        <li><strong>Withdraw Consent:</strong> Unsubscribe from communications</li>
                    </ul>

                    <hr class="my-4">

                    <h2 class="h4 mb-3">5. Data Retention</h2>
                    <ul>
                        <li><strong>Active Accounts:</strong> Data is retained as long as your account is active</li>
                        <li><strong>Deleted Accounts:</strong> 30-day grace period, then permanently deleted</li>
                        <li><strong>Payment Records:</strong> Retained for 7 years for tax/legal compliance</li>
                        <li><strong>Audit Logs:</strong> Retained for 90 days for security monitoring</li>
                    </ul>

                    <hr class="my-4">

                    <h2 class="h4 mb-3">6. Security Measures</h2>
                    <p>We implement industry-standard security measures:</p>
                    <ul>
                        <li>HTTPS encryption for all data in transit</li>
                        <li>Password hashing with bcrypt</li>
                        <li>Secure database with access controls</li>
                        <li>Regular security audits</li>
                        <li>Rate limiting to prevent abuse</li>
                        <li>CSRF protection on all forms</li>
                    </ul>

                    <hr class="my-4">

                    <h2 class="h4 mb-3">7. Cookies and Tracking</h2>
                    <p>We use cookies for:</p>
                    <ul>
                        <li><strong>Essential Cookies:</strong> Session management and authentication (required)</li>
                        <li><strong>Preference Cookies:</strong> Remember your settings (dark mode, timezone)</li>
                        <li><strong>No Third-Party Tracking:</strong> We do NOT use advertising or analytics cookies</li>
                    </ul>

                    <hr class="my-4">

                    <h2 class="h4 mb-3">8. Children's Privacy</h2>
                    <p>
                        HabitFlow is not intended for children under 13. We do not knowingly collect data from children. If you believe we have collected data from a child, please contact us immediately.
                    </p>

                    <hr class="my-4">

                    <h2 class="h4 mb-3">9. Changes to This Policy</h2>
                    <p>
                        We may update this Privacy Policy from time to time. We will notify you of material changes via email or in-app notification. Continued use of the service after changes constitutes acceptance.
                    </p>

                    <hr class="my-4">

                    <h2 class="h4 mb-3">10. Contact Us</h2>
                    <p>If you have questions about this Privacy Policy or want to exercise your rights, contact us at:</p>
                    <ul class="list-unstyled">
                        <li><strong>Email:</strong> privacy@habitflow.com</li>
                        <li><strong>Data Protection Officer:</strong> dpo@habitflow.com</li>
                    </ul>

                </div>
            </div>

            <!-- Action Buttons -->
            {% if current_user.is_authenticated %}
            <div class="text-center mt-4">
                <a href="{{ url_for('profile.export_data') }}" class="btn btn-primary">
                    üì• Download My Data (GDPR)
                </a>
                <a href="{{ url_for('profile.delete_account') }}" class="btn btn-outline-danger ms-2">
                    üóëÔ∏è Delete My Account
                </a>
            </div>
            {% endif %}

            <!-- Back Link -->
            <div class="text-center mt-4">
                <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">‚Üê Back to Home</a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
